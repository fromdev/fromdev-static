<html><head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<title>List Item HTML</title>
<LINK href="stylesheets/wrap.css" rel="stylesheet" type="text/css">  
<script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js" type="text/javascript"></script>
<script src="javascripts/wrap.js" type="text/javascript"></script> 
<script src="javascripts/link-index.js" type="text/javascript"></script>
<script src="javascripts/register-links.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="stylesheets/wrap.css">

<script type="text/javascript">//&lt;![CDATA[ 
    const prefills = {
        timestamp: () => `Article Updated on ${new Date().toLocaleString('default', { month: 'long' })} ${new Date().getFullYear()}`,
        https: () => 'Some HTTP links are updated to HTTPS',
        minor: () => 'Some minor text updates done',
        validated: () => `Content validated and updated for relevance in ${new Date().getFullYear()}`,
        brokenlinks: () => 'Updated broken links with latest URLs'
    };
$(document).ready(function(){   



  	$('#form').submit(function(){
  		var $this = $(this);
		$this.validate(); 		
		return false;
  	});
 	
    $('#wrap').click(function () {
        var heading = wrapItem({
            elementSelector: '#title',
            creator: createTag,
            openTag: '<h2>',
            closeTag: '</h2>',
            decorator: toTitleCase,
            useAllText: true
        });        

        const selectedPrefills = $('#prefill').val();
        const prefillText = (selectedPrefills || []).filter(v => v).map(p => p && prefills[p]()).join('. ') || '';
        const customText = $('#fulltext').val() || '';
        let para = `${prefillText}. ${customText}`.trim();
        if(para.length - 1 !== para.lastIndexOf('.')) {
            para = para + '.';
        }
        if(heading && para) {
        	$('#showtext').val(`<div class="related-index">${heading} <ul><li>${para}</li></ul></div>`);
        }
    });
    
    $("#showtext").focus(function () {
        var $this = $(this);
        $this.select();

        // Work around Chrome's little problem
        $this.mouseup(function () {
            // Prevent further mouseup intervention
            $this.unbind("mouseup");
            return false;
        });
    });
    $('#wrap').click();
	
});//]]&gt;  

</script>


</head>
<body>
<form id="form">
<div class="container">
<ul class='index'></ul><p> <h2>List Item</h2></p>
<div class="left">
    <input type="text" id="title" value="Article Updates" placeholder="Enter Article Updates Headline">
    <textarea id="fulltext" value="" placeholder="Add custom updates here"></textarea>
<select name="prefill" id="prefill" multiple="multiple">
    <option value="timestamp" selected="selected">Article Updated Timestamp Month/Year</option>
    <option value="https" selected="selected">HTTP Links Converted to HTTPS</option>
    <option value="brokenlinks" selected="selected">Fixed broken links</option>
    <option value="minor" selected="selected">Minor Text Updates Made</option>
    <option value="validated" selected="selected">Validate for current year</option>
</select>
</div>
<div class="center">
<div id="log"></div>
<button type="submit" id="wrap">Create HTML</button>
</div>
<div class="right">
<textarea id="showtext"></textarea>
</div >
</div>
</form>
</body></html>
